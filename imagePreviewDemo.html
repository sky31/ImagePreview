<!DOCTYPE html>
<html>

<head>
	
	<script language="JavaScript" src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
</head>
	<body>
	


		<img  src="#" id="image-preview0"  alt="Responsive image">
		<input type="file"  id="file-0" name="upload-file"  onchange="imagePreview(this)" placeholder="上传文件">



		<img   src="" alt="image-preview" id="image-preview1">
		<input type="file" id="file-1"   name="voteBeanList[0].coverfile"  onchange="imagePreview(this)">


		<img   src="" alt="image-preview" id="image-preview2">
		<input type="file" id="file-2"   name="voteBeanList[0].coverfile"  onchange="imagePreview(this)">



	</body>
<script>
//图片上传预览
    var num = 0;			
    ofr = new FileReader();  //获取H5的 FileReader对象

    //正则表达式，用于过滤文件类型。
    rFilter = /^(?:image\/bmp|image\/cis\-cod|image\/gif|image\/ief|image\/jpeg|image\/jpeg|image\/jpeg|image\/pipeg|image\/png|image\/svg\+xml|image\/tiff|image\/x\-cmu\-raster|image\/x\-cmx|image\/x\-icon|image\/x\-portable\-anymap|image\/x\-portable\-bitmap|image\/x\-portable\-graymap|image\/x\-portable\-pixmap|image\/x\-rgb|image\/x\-xbitmap|image\/x\-xpixmap|image\/x\-xwindowdump)$/i;


    ofr.onload = function (oFREvent) {

    	//onload事件，用于文件加载完毕后显示图片的预览。
        document.getElementById("image-preview"+num).src = oFREvent.target.result;
    };
    function imagePreview(obj) {
        console.error("hehe2");
        num = $(obj).attr("id").split("-")[1];	//分割id的后缀。
        if (obj.files.length === 0) {
            return;
        }
        var oFile = obj.files[0];
        if (!rFilter.test(oFile.type)) {
            alert("You must select a valid image file!");
            return;
        }
        ofr.readAsDataURL(oFile);
    }
</script>


</html>